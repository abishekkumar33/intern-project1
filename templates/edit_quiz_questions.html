<!DOCTYPE html>
<html>
<head>
<title>Edit Quiz | Quiz Master</title>

<style>
body{
    min-height:100vh;
    background:linear-gradient(135deg,#1f2933,#111827);
    padding:40px;
    color:#fff;
    font-family:'Segoe UI';
}
.container{
    max-width:900px;
    margin:auto;
}
h2{
    text-align:center;
    color:#60a5fa;
    margin-bottom:30px;
}
.card{
    background:rgba(255,255,255,0.06);
    backdrop-filter:blur(8px);
    padding:25px;
    border-radius:16px;
    margin-bottom:25px;
}
label{
    font-weight:600;
    display:block;
    margin-top:12px;
}
input{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:none;
    margin-top:6px;
}
.option-row{
    display:flex;
    align-items:center;
    gap:10px;
    margin-top:10px;
}
.save-btn{
    width:100%;
    padding:14px;
    border-radius:28px;
    border:none;
    font-weight:600;
    background:linear-gradient(90deg,#3b82f6,#2563eb);
    color:#fff;
    margin-top:30px;
    cursor:pointer;
}

.add-btn{
    width:100%;
    padding:14px;
    border-radius:28px;
    border:2px dashed #60a5fa;
    background:transparent;
    color:#60a5fa;
    font-weight:600;
    margin-top:10px;
    cursor:pointer;
}

.add-btn:hover{
    background:#60a5fa;
    color:#000;
}
</style>
</head>

<body>

<div class="container">
    <h2>Edit Quiz</h2>

    <form method="POST">

        <!-- ================= EXISTING QUESTIONS ================= -->
        {% for q in questions %}
        <div class="card">

            <label>Question</label>
            <input type="text"
                   name="question_{{ q.question_id }}"
                   value="{{ q.question_text }}"
                   required>

            {% for opt in q.options %}
            <div class="option-row">
                <input type="radio"
                       name="correct_{{ q.question_id }}"
                       value="{{ opt.option_id }}"
                       {% if opt.is_correct %}checked{% endif %}>

                <input type="text"
                       name="option_{{ opt.option_id }}"
                       value="{{ opt.option_text }}"
                       required>
            </div>
            {% endfor %}
        </div>
        {% endfor %}


        <!-- ================= NEW QUESTIONS ADDED HERE ================= -->
        <div id="new-questions"></div>

        <button type="button" class="add-btn" onclick="addQuestion()">
            + Add New Question
        </button>

        <button type="submit" class="save-btn">Save Changes</button>
    </form>
</div>


<script>
let newCount = 0;

function addQuestion(){

    newCount++;

    let div = document.createElement('div');
    div.className = "card";

    div.innerHTML = `
        <label>New Question</label>
        <input type="text" name="new_question_${newCount}" placeholder="Enter question" required>

        <div class="option-row">
            <input type="radio" name="new_correct_${newCount}" value="1" required>
            <input type="text" name="new_opt1_${newCount}" placeholder="Option A" required>
        </div>

        <div class="option-row">
            <input type="radio" name="new_correct_${newCount}" value="2">
            <input type="text" name="new_opt2_${newCount}" placeholder="Option B" required>
        </div>

        <div class="option-row">
            <input type="radio" name="new_correct_${newCount}" value="3">
            <input type="text" name="new_opt3_${newCount}" placeholder="Option C" required>
        </div>

        <div class="option-row">
            <input type="radio" name="new_correct_${newCount}" value="4">
            <input type="text" name="new_opt4_${newCount}" placeholder="Option D" required>
        </div>
    `;

    document.getElementById("new-questions").appendChild(div);
}
</script>

</body>
</html>
